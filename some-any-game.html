<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Some & Any - Sentence Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .instructions {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 20px;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .score-item {
            text-align: center;
        }

        .score-label {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 5px;
        }

        .score-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .prompt {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            color: #333;
            font-weight: 500;
        }

        .drop-zone {
            min-height: 80px;
            background: #fff;
            border: 3px dashed #ccc;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 25px;
            min-height: 60px;
        }

        .word {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: move;
            user-select: none;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .word:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .word.dragging {
            opacity: 0.5;
        }

        .word.in-sentence {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            cursor: pointer;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .check-btn {
            background: #11998e;
            color: white;
        }

        .check-btn:hover {
            background: #0d7d6f;
            transform: translateY(-2px);
        }

        .reset-btn {
            background: #f093fb;
            color: white;
        }

        .reset-btn:hover {
            background: #d67ee0;
            transform: translateY(-2px);
        }

        .next-btn {
            background: #667eea;
            color: white;
        }

        .next-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            font-weight: 500;
            margin-bottom: 15px;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
            display: block;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
            display: block;
        }

        .completion-message {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            display: none;
        }

        .completion-message h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .completion-message p {
            font-size: 1.2em;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
            }

            h1 {
                font-size: 1.5em;
            }

            .word {
                padding: 10px 15px;
                font-size: 0.9em;
            }

            button {
                padding: 10px 20px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ðŸŽ® Some & Any Sentence Builder</h1>
            <div class="instructions">
                Drag the words to build a correct sentence using "some" or "any"
            </div>
        </div>

        <div class="score-board">
            <div class="score-item">
                <div class="score-label">Correct</div>
                <div class="score-value" id="correct-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Question</div>
                <div class="score-value" id="question-number">1</div>
            </div>
            <div class="score-item">
                <div class="score-label">Streak</div>
                <div class="score-value" id="streak">0</div>
            </div>
        </div>

        <div class="prompt" id="prompt"></div>

        <div class="drop-zone" id="drop-zone">
            <span style="color: #999; font-style: italic;">Drag words here...</span>
        </div>

        <div class="word-bank" id="word-bank"></div>

        <div class="feedback" id="feedback"></div>

        <div class="buttons">
            <button class="reset-btn" onclick="resetSentence()">ðŸ”„ Reset</button>
            <button class="check-btn" onclick="checkAnswer()">âœ“ Check Answer</button>
            <button class="next-btn" onclick="nextQuestion()" style="display: none;" id="next-btn">Next â†’</button>
        </div>

        <div class="completion-message" id="completion">
            <h2>ðŸŽ‰ Excellent Work!</h2>
            <p>You've completed all the exercises!</p>
            <p id="final-score"></p>
            <button class="next-btn" onclick="restartGame()" style="margin-top: 20px;">Play Again</button>
        </div>
    </div>

    <script>
        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'correct':
                    // Happy ascending notes
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.4);
                    break;
                    
                case 'incorrect':
                    // Descending notes
                    oscillator.frequency.setValueAtTime(392.00, audioContext.currentTime); // G4
                    oscillator.frequency.setValueAtTime(293.66, audioContext.currentTime + 0.15); // D4
                    oscillator.type = 'triangle';
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                    
                case 'drop':
                    // Short pop sound
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                    
                case 'pickup':
                    // Quick ascending blip
                    oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.05);
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.05);
                    break;
                    
                case 'complete':
                    // Victory fanfare
                    const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                    notes.forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + (i * 0.15));
                        gain.gain.setValueAtTime(0.2, audioContext.currentTime + (i * 0.15));
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + (i * 0.15) + 0.3);
                        osc.start(audioContext.currentTime + (i * 0.15));
                        osc.stop(audioContext.currentTime + (i * 0.15) + 0.3);
                    });
                    return; // Don't start the main oscillator
            }
        }

        const exercises = [
            {
                prompt: "Build a negative sentence about money using 'some' or 'any'",
                words: ["I", "don't", "have", "any", "money", "some"],
                correct: ["I", "don't", "have", "any", "money"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Make an offer about coffee using 'some' or 'any'",
                words: ["Would", "you", "like", "some", "coffee", "any"],
                correct: ["Would", "you", "like", "some", "coffee"],
                explanation: "Use 'some' in offers and requests."
            },
            {
                prompt: "Build a positive sentence about apples in a basket",
                words: ["There", "are", "some", "apples", "in", "the", "basket", "any"],
                correct: ["There", "are", "some", "apples", "in", "the", "basket"],
                explanation: "Use 'some' in positive sentences."
            },
            {
                prompt: "Ask a question about questions using 'some' or 'any'",
                words: ["Do", "you", "have", "any", "questions", "some"],
                correct: ["Do", "you", "have", "any", "questions"],
                explanation: "Use 'any' in questions."
            },
            {
                prompt: "Build a negative sentence about buying bread",
                words: ["She", "didn't", "buy", "any", "bread", "some"],
                correct: ["She", "didn't", "buy", "any", "bread"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Make a polite request for water",
                words: ["Can", "I", "have", "some", "water", "please", "any"],
                correct: ["Can", "I", "have", "some", "water", "please"],
                explanation: "Use 'some' when making requests."
            },
            {
                prompt: "Build a negative sentence about milk in the fridge",
                words: ["There", "isn't", "any", "milk", "in", "the", "fridge", "some"],
                correct: ["There", "isn't", "any", "milk", "in", "the", "fridge"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Build a positive sentence about needing help with homework",
                words: ["I", "need", "some", "help", "with", "my", "homework", "any"],
                correct: ["I", "need", "some", "help", "with", "my", "homework"],
                explanation: "Use 'some' in positive sentences."
            },
            {
                prompt: "Ask a question about seeing friends",
                words: ["Did", "you", "see", "any", "of", "your", "friends", "some"],
                correct: ["Did", "you", "see", "any", "of", "your", "friends"],
                explanation: "Use 'any' in questions."
            },
            {
                prompt: "Make an offer about cake",
                words: ["Would", "you", "like", "some", "cake", "any"],
                correct: ["Would", "you", "like", "some", "cake"],
                explanation: "Use 'some' in offers."
            },
            {
                prompt: "Build a negative sentence about finding information",
                words: ["We", "couldn't", "find", "any", "information", "online", "some"],
                correct: ["We", "couldn't", "find", "any", "information", "online"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Build a positive sentence about making new friends",
                words: ["I", "made", "some", "new", "friends", "at", "school", "any"],
                correct: ["I", "made", "some", "new", "friends", "at", "school"],
                explanation: "Use 'some' in positive sentences."
            },
            {
                prompt: "Ask a question about having sugar",
                words: ["Do", "you", "have", "any", "sugar", "some"],
                correct: ["Do", "you", "have", "any", "sugar"],
                explanation: "Use 'any' in questions."
            },
            {
                prompt: "Build a negative sentence about speaking languages",
                words: ["He", "doesn't", "speak", "any", "foreign", "languages", "some"],
                correct: ["He", "doesn't", "speak", "any", "foreign", "languages"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Make a polite request for advice",
                words: ["Could", "you", "give", "me", "some", "advice", "any"],
                correct: ["Could", "you", "give", "me", "some", "advice"],
                explanation: "Use 'some' when making requests."
            },
            {
                prompt: "Build a positive sentence about eating cookies",
                words: ["They", "ate", "some", "cookies", "after", "dinner", "any"],
                correct: ["They", "ate", "some", "cookies", "after", "dinner"],
                explanation: "Use 'some' in positive sentences."
            },
            {
                prompt: "Ask a question about having plans tonight",
                words: ["Do", "you", "have", "any", "plans", "tonight", "some"],
                correct: ["Do", "you", "have", "any", "plans", "tonight"],
                explanation: "Use 'any' in questions."
            },
            {
                prompt: "Build a negative sentence about watching TV",
                words: ["I", "didn't", "watch", "any", "TV", "yesterday", "some"],
                correct: ["I", "didn't", "watch", "any", "TV", "yesterday"],
                explanation: "Use 'any' in negative sentences."
            },
            {
                prompt: "Build a positive sentence about buying books",
                words: ["She", "bought", "some", "interesting", "books", "some"],
                correct: ["She", "bought", "some", "interesting", "books"],
                explanation: "Use 'some' in positive sentences."
            },
            {
                prompt: "Make a polite offer about tea",
                words: ["Would", "you", "like", "some", "tea", "or", "coffee", "any"],
                correct: ["Would", "you", "like", "some", "tea", "or", "coffee"],
                explanation: "Use 'some' in offers."
            }
        ];

        let currentQuestion = 0;
        let correctAnswers = 0;
        let streak = 0;
        let currentSentence = [];

        function loadQuestion() {
            const exercise = exercises[currentQuestion];
            document.getElementById('prompt').textContent = exercise.prompt;
            document.getElementById('question-number').textContent = currentQuestion + 1;
            
            const wordBank = document.getElementById('word-bank');
            wordBank.innerHTML = '';
            
            // Shuffle words
            const shuffled = [...exercise.words].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word';
                wordElement.textContent = word;
                wordElement.draggable = true;
                wordElement.addEventListener('dragstart', handleDragStart);
                wordElement.addEventListener('dragend', handleDragEnd);
                wordBank.appendChild(wordElement);
            });

            currentSentence = [];
            updateDropZone();
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
        }

        function handleDragStart(e) {
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', e.target.textContent);
            playSound('pickup');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        const dropZone = document.getElementById('drop-zone');
        
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('drag-over');
            
            const draggingElement = document.querySelector('.dragging');
            if (!draggingElement) return;
            
            // Find the word element under the cursor
            const afterElement = getDragAfterElement(dropZone, e.clientX);
            
            // Remove any existing drop indicator
            const existingIndicator = dropZone.querySelector('.drop-indicator');
            if (existingIndicator) {
                existingIndicator.remove();
            }
            
            // Add visual indicator where the word will be dropped
            const indicator = document.createElement('div');
            indicator.className = 'drop-indicator';
            indicator.style.cssText = 'width: 3px; height: 40px; background: #667eea; border-radius: 2px; margin: 0 5px;';
            
            if (afterElement == null) {
                dropZone.appendChild(indicator);
            } else {
                dropZone.insertBefore(indicator, afterElement);
            }
        });

        dropZone.addEventListener('dragleave', (e) => {
            // Only remove drag-over if we're actually leaving the drop zone
            if (e.target === dropZone) {
                dropZone.classList.remove('drag-over');
                const indicator = dropZone.querySelector('.drop-indicator');
                if (indicator) indicator.remove();
            }
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('drag-over');
            
            const word = e.dataTransfer.getData('text/plain');
            const draggingElement = document.querySelector('.dragging');
            
            // Remove drop indicator
            const indicator = dropZone.querySelector('.drop-indicator');
            if (indicator) indicator.remove();
            
            if (draggingElement) {
                const afterElement = getDragAfterElement(dropZone, e.clientX);
                
                // Determine the index to insert at
                let insertIndex;
                if (afterElement == null) {
                    insertIndex = currentSentence.length;
                } else {
                    const afterWord = afterElement.textContent;
                    insertIndex = currentSentence.indexOf(afterWord);
                }
                
                // If dragging from word bank, add to sentence
                if (draggingElement.parentElement.id === 'word-bank') {
                    currentSentence.splice(insertIndex, 0, word);
                    draggingElement.remove();
                } 
                // If reordering within sentence
                else if (draggingElement.classList.contains('in-sentence')) {
                    const oldIndex = currentSentence.indexOf(word);
                    currentSentence.splice(oldIndex, 1);
                    
                    // Adjust insert index if needed
                    if (oldIndex < insertIndex) {
                        insertIndex--;
                    }
                    currentSentence.splice(insertIndex, 0, word);
                }
                
                updateDropZone();
                playSound('drop');
            }
        });
        
        function getDragAfterElement(container, x) {
            const draggableElements = [...container.querySelectorAll('.word.in-sentence:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = x - box.left - box.width / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function updateDropZone() {
            dropZone.innerHTML = '';
            
            if (currentSentence.length === 0) {
                const placeholder = document.createElement('span');
                placeholder.style.color = '#999';
                placeholder.style.fontStyle = 'italic';
                placeholder.textContent = 'Drag words here...';
                dropZone.appendChild(placeholder);
            } else {
                currentSentence.forEach((word, index) => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word in-sentence';
                    wordElement.textContent = word;
                    wordElement.draggable = true;
                    wordElement.onclick = () => removeWord(index);
                    wordElement.addEventListener('dragstart', handleDragStart);
                    wordElement.addEventListener('dragend', handleDragEnd);
                    dropZone.appendChild(wordElement);
                });
            }
        }

        function removeWord(index) {
            const word = currentSentence[index];
            currentSentence.splice(index, 1);
            
            const wordElement = document.createElement('div');
            wordElement.className = 'word';
            wordElement.textContent = word;
            wordElement.draggable = true;
            wordElement.addEventListener('dragstart', handleDragStart);
            wordElement.addEventListener('dragend', handleDragEnd);
            document.getElementById('word-bank').appendChild(wordElement);
            
            updateDropZone();
            playSound('pickup');
        }

        function resetSentence() {
            loadQuestion();
        }

        function checkAnswer() {
            const exercise = exercises[currentQuestion];
            const feedback = document.getElementById('feedback');
            
            const isCorrect = JSON.stringify(currentSentence) === JSON.stringify(exercise.correct);
            
            if (isCorrect) {
                playSound('correct');
                feedback.className = 'feedback correct';
                feedback.textContent = `âœ“ Correct! ${exercise.explanation}`;
                correctAnswers++;
                streak++;
                document.getElementById('correct-score').textContent = correctAnswers;
                document.getElementById('streak').textContent = streak;
                document.getElementById('next-btn').style.display = 'inline-block';
            } else {
                playSound('incorrect');
                feedback.className = 'feedback incorrect';
                feedback.textContent = `âœ— Not quite. ${exercise.explanation} Try again!`;
                streak = 0;
                document.getElementById('streak').textContent = streak;
            }
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= exercises.length) {
                showCompletion();
            } else {
                loadQuestion();
            }
        }

        function showCompletion() {
            playSound('complete');
            document.querySelector('.prompt').style.display = 'none';
            document.querySelector('.drop-zone').style.display = 'none';
            document.querySelector('.word-bank').style.display = 'none';
            document.querySelector('.buttons').style.display = 'none';
            document.querySelector('.feedback').style.display = 'none';
            
            const completion = document.getElementById('completion');
            const percentage = Math.round((correctAnswers / exercises.length) * 100);
            document.getElementById('final-score').textContent = 
                `You got ${correctAnswers} out of ${exercises.length} correct (${percentage}%)`;
            completion.style.display = 'block';
        }

        function restartGame() {
            currentQuestion = 0;
            correctAnswers = 0;
            streak = 0;
            document.getElementById('correct-score').textContent = '0';
            document.getElementById('streak').textContent = '0';
            
            document.querySelector('.prompt').style.display = 'block';
            document.querySelector('.drop-zone').style.display = 'flex';
            document.querySelector('.word-bank').style.display = 'flex';
            document.querySelector('.buttons').style.display = 'flex';
            document.getElementById('completion').style.display = 'none';
            
            loadQuestion();
        }

        // Initialize the first question
        loadQuestion();
    </script>
</body>
</html>